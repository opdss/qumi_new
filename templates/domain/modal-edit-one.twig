
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
    <h4 class="modal-title">域名修改 [{{ domain.name }}]</h4>
</div>
<div class="modal-body">
    <form class="form-horizontal modal-form" >
        <div class="form-group">
            <label for="description" class="col-sm-2 control-label">域名</label>
            <div class="col-sm-6">
                <input class="form-control" type="text" value="{{ domain.name }}" disabled>
            </div>
        </div>

        <div class="form-group">
            <label for="description" class="col-sm-2 control-label">域名简介</label>
            <div class="col-sm-8">
                <textarea class="form-control" rows="3" name="description" placeholder="域名简介">{{ domain.description }}</textarea>
            </div>
        </div>

        <div class="form-group price-group">
            <label for="price" class="col-sm-2 control-label">报价</label>
            <div class="col-sm-4">
                <div class="input-group">
                    <div class="input-group-addon">$</div>
                    <input type="number" class="form-control price" id="price" name="price" value="{{ domain.price }}" {{ domain.sale_type==1 ? 'readonly' : '' }}>
                    <div class="input-group-addon">.00
                    </div>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" class="sale_type" name="sale_type" value="1" {{ domain.sale_type==1 ? 'checked' : '' }}>询价
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="phone" class="col-sm-2 control-label">选择模板</label>
            <div class="col-sm-4">
                <select class="selectpicker" name="template_id">
                    <option value="0">选择模板</option>
                    {% for x in templates %}
                        <option value="{{ x.id }}">{{ x.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <input type="hidden" name="domain_id" value="{{ domain.id }}">
    </form>
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
    <button type="button" class="btn btn-primary modal-submit">确认</button>
</div>
<script type="text/javascript">
    (function () {
        $('.selectpicker').selectpicker('val', {{ domain.template_id }});
        $('.modal-submit').click(function () {
            var modalObj = $(this).parents('div.modal');
            var form = modalObj.find('form.modal-form');
            $.post('{{ path_for('domain.update') }}', form.serialize(), function(res){
                if (res.errCode == 0) {
                    modalObj.modal('hide');
                    utils.swal.success('', true);
                } else {
                    utils.swal.error(res.errMsg);
                }
            })
        })
    })()
</script>