{% extends 'console.twig' %}

{% block console %}
    <div class="site-content">

        <!-- 数据表格 start -->
        <div class="layui-row">
            {% for x in records %}
            <div class="layui-col-xs12 layui-col-md4">
                <div class="layui-card">
                    <div class="layui-card-header">
                        {{ x.name }}
                        <div class="card-tools">
                            <a href="javascript:;" class="btnEdit" data-id="{{ x.id }}"><i class="layui-icon layui-icon-set-sm"></i></a>
                            <a href="javascript:;" class="btnDel" data-id="{{ x.id }}"><i class="layui-icon layui-icon-delete"></i></a>
                        </div>
                    </div>
                    <div class="layui-card-body card-mibiao">
                        <p style="line-height: 80px;font-size: 24px;">共有<span style="font-size: 48px;color: #00a8c6">{{ x.domainCount }}</span>个域名</p>
                        <p><a href="{{ x.defaultUrl }}" target="_blank">{{ x.defaultUrl }}</a></p>
                        {% if x.myUrl %}
                            <p>自定义地址：<a href="http://{{ x.myUrl }}" target="_blank">http://{{ x.myUrl }}</a></p>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="layui-col-xs12 layui-col-md4">
                <div class="layui-card">
                    <div class="layui-card-header">
                        添加米表
                    </div>
                    <div class="layui-card-body card-mibiao">
                        <a style="font-size: 36px;padding: 50px 0px;display:block;cursor: pointer;" id="btnAdd">
                            <i class="layui-icon layui-icon-add-1" style="font-size: 36px;font-weight: bold"></i>
                            添加米表
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- 数据表格 end -->
    </div>
{% endblock %}

{% block script %}
    <script type="text/javascript">

        layui.use(['layer', 'utils'], function(){
            var $ = layui.$;
            var utils = layui.utils;
            $('.btnEdit').on('click', function () {
                alert('edit')
            })
            $('.btnDel').on('click', function () {
                var $this = $(this);
                utils.delById('{{ path_for('api.mibiao.del') }}', $this.data('id'), function (res) {
                    $this.parents('.layui-card').parent().remove();
                })
            })
        });
    </script>
{% endblock %}